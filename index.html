<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é‡‘å£è¨£G - ç«¶é¦¬è§£æã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        :root {
            --primary-bg: #f0f4f8;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --accent-blue: #3498db;
            --accent-dark: #2c3e50;
            --border-color: #dee2e6;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: var(--primary-bg); 
            margin: 0; 
            padding: 15px; 
            color: var(--text-main);
            -webkit-tap-highlight-color: transparent;
        }

        /* å³ä¸Šãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒªãƒ³ã‚¯ */
        .manual-nav {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 1000;
        }
        .manual-nav a {
            background: rgba(255, 255, 255, 0.9);
            color: var(--accent-blue);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid var(--accent-blue);
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .container { 
            max-width: 100%; 
            margin: 0 auto; 
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 16px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.08); 
            box-sizing: border-box;
        }

        h2 { 
            text-align: center; 
            font-size: 1.5rem; 
            margin-top: 0; 
            margin-bottom: 20px; 
            color: var(--accent-dark);
            border-bottom: 3px solid var(--accent-blue);
            padding-bottom: 8px;
        }

        /* å…¥åŠ›ã‚°ãƒªãƒƒãƒ‰ï¼šã‚¹ãƒãƒ›ã§ã¯1åˆ—ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸Šã§2åˆ— */
        .input-grid { 
            display: grid; 
            grid-template-columns: 1fr; 
            gap: 12px; 
            margin-bottom: 20px; 
        }

        @media (min-width: 480px) {
            .input-grid { grid-template-columns: 1fr 1fr; }
        }

        .input-group { display: flex; flex-direction: column; }
        
        label { 
            font-size: 0.9rem; 
            font-weight: bold; 
            margin-bottom: 6px; 
            color: #555; 
        }

        select { 
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid #ccc; 
            font-size: 1.1rem; /* ã‚¹ãƒãƒ›ã§ã‚ºãƒ¼ãƒ ã•ã‚Œãªã„ã‚µã‚¤ã‚º */
            background-color: #fff;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 1em;
        }

        button { 
            width: 100%; 
            padding: 16px; 
            background: var(--accent-dark); 
            color: white; 
            border: none; 
            border-radius: 12px; 
            font-size: 1.2rem; 
            font-weight: bold; 
            cursor: pointer; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.98); }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        #output { margin-top: 25px; }

        .lucky-panel { 
            margin-bottom: 20px; 
            background: linear-gradient(135deg, #3498db, #2c3e50); 
            color: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
        }
        .lucky-info { font-size: 0.9rem; opacity: 0.9; }
        .lucky-number { font-size: 3.5rem; font-weight: bold; margin: 5px 0; letter-spacing: 4px; }

        .result-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-bottom: 20px; 
            font-size: 1rem;
        }
        .result-table th, .result-table td { 
            border-bottom: 1px solid #eee; 
            padding: 12px 8px; 
            text-align: center; 
        }
        .result-table th { font-size: 0.75rem; color: #888; text-transform: uppercase; }

        .value { font-size: 1.2rem; font-weight: bold; }
        
        .element-badge { 
            padding: 4px 10px; 
            border-radius: 15px; 
            color: white; 
            font-weight: bold; 
            font-size: 0.85rem; 
            display: inline-block;
        }
        .elem-1 { background: #27ae60; } /* æœ¨ */
        .elem-2 { background: #e74c3c; } /* ç« */
        .elem-3 { background: #f1c40f; color: #333 !important; } /* åœŸ */
        .elem-4 { background: #95a5a6; } /* é‡‘ */
        .elem-5 { background: #2980b9; } /* æ°´ */

        .satsu-badge { 
            color: #e67e22; 
            font-weight: bold; 
            font-size: 0.8rem; 
            display: block; 
            margin-top: 4px;
        }

        .judge-box { 
            background: #fff; 
            border: 2px dashed var(--accent-blue); 
            padding: 15px; 
            border-radius: 12px; 
        }
        .move-tag { 
            display: inline-block; 
            background: #e1f5fe; 
            color: #0288d1; 
            padding: 4px 10px; 
            border-radius: 6px; 
            font-size: 0.9rem; 
            margin: 4px; 
            font-weight: bold; 
        }

        .footer { text-align: center; margin-top: 20px; font-size: 0.75rem; color: #999; }
    </style>
</head>
<body>

<div class="manual-nav">
    <a href="manual.html" target="_blank">ğŸ“– ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a>
</div>

<div class="container">
    <h2>é‡‘å£è¨£G <span style="font-size: 0.6em; opacity: 0.6;">Final v1.4</span></h2>
    
    <div class="input-grid">
        <div class="input-group"><label>åœ°åˆ†(D)</label><select id="diBun"></select></div>
        <div class="input-group"><label>æœˆå°†(M)</label><select id="getSho"></select></div>
        <div class="input-group"><label>æ™‚æ”¯(T)</label><select id="tokiShi"></select></div>
        <div class="input-group"><label>å½“æ—¥ã®å¤©å¹²(H)</label><select id="nichiKan"></select></div>
        <div class="input-group"><label>å½“æ—¥ã®åœ°æ”¯(S)</label><select id="nichiShi"></select></div>
        <div class="input-group"><label>æ˜¼å¤œåˆ¤å®š</label><select id="isNight"><option value="false">æ˜¼ (æ—¥ä¸­)</option><option value="true">å¤œ (æ—¥æ²¡å¾Œ)</option></select></div>
    </div>

    <button onclick="run()">è§£æ & æ•°å€¤æŠ½å‡º</button>

    <div id="output">
        <p style="text-align:center; color:#999; margin-top:40px;">æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦è§£æãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„</p>
    </div>

    <div class="footer">Â© 2026 KinkoketsuG Project</div>
</div>

<script src="KinkoketsuCalc.js"></script>
<script src="KinkoketsuJudge.js"></script>
<script>
const zodiacs = ["", "å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];
const tens = ["", "ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"];

function setup() {
    ["diBun", "getSho", "tokiShi", "nichiShi"].forEach(id => {
        const el = document.getElementById(id);
        for(let i=1; i<=12; i++) el.innerHTML += `<option value="${i}">${zodiacs[i]}</option>`;
    });
    const kanSelect = document.getElementById("nichiKan");
    for(let i=1; i<=10; i++) kanSelect.innerHTML += `<option value="${i}">${tens[i]}</option>`;
}

function run() {
    const D = document.getElementById("diBun").value, M = document.getElementById("getSho").value, T = document.getElementById("tokiShi").value;
    const H = document.getElementById("nichiKan").value, S = document.getElementById("nichiShi").value, N = document.getElementById("isNight").value;

    const calc = new kinkoketsuCalc(D, M, T, H, N);
    const res = calc.getResults();
    const judge = new kinkoketsuJudge(res, M, H, S);
    const lucky = judge.getLuckyNumbers();
    const moves = judge.getFiveMoves();
    const satsu = judge.getShinSatsu();

    let html = `
        <div class="lucky-panel">
            <div class="lucky-info">æœ¬å‘½äº”è¡Œ: ${lucky.elemName} (ä¿¡é ¼åº¦: ${lucky.score})</div>
            <div class="lucky-number">${lucky.numbers}</div>
            <div class="lucky-info">æ¨å¥¨ã•ã‚Œã‚‹å…ˆå¤©æ•°</div>
        </div>
        <table class="result-table">
            <thead><tr><th>å±¤</th><th>å€¤</th><th>äº”è¡Œ</th><th>æ—ºç›¸</th></tr></thead>
            <tbody>`;
    
    ["jinGen", "kiShin", "shoShin", "diBun"].forEach(key => {
        const elem = judge.elements[key];
        const power = judge.getPower(elem);
        const s = satsu[key].map(t => `<span class="satsu-badge">! ${t}</span>`).join('');
        const label = key === "jinGen" ? "äººå…ƒ" : key === "kiShin" ? "è²´ç¥" : key === "shoShin" ? "å°†ç¥" : "åœ°åˆ†";
        
        html += `<tr>
            <td style="color:#888; font-size:0.8rem;">${label}</td>
            <td class="value">${res[key]}${s}</td>
            <td><span class="element-badge elem-${elem}">${judge.elementNames[elem]}</span></td>
            <td style="font-weight:bold;">${judge.statusNames[power]}</td>
        </tr>`;
    });

    html += `</tbody></table><div class="judge-box">`;
    html += moves.length > 0 ? moves.map(m => `<span class="move-tag">${m.name}</span>`).join('') : '<span style="color:#999">ç‰¹ç­†ã™ã¹ãå‹•ããªã—</span>';
    html += `</div>`;
    
    document.getElementById("output").innerHTML = html;

    // è§£æå¾Œã«çµæœéƒ¨åˆ†ã¸ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    document.getElementById("output").scrollIntoView({ behavior: 'smooth', block: 'start' });
}
setup();
</script>
</body>
</html>